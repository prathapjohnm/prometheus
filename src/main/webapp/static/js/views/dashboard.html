<!--
 Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
 -->
<div class="oj-padding">
    <div class="oj-flex search-box" data-bind="css: results() ? 'result-shown' : ''">
        <div class="oj-flex-item fullSize">
            <h3 class="logoFont">Prometheus</h3>
        </div>
        <div class="oj-flex-item fullSize">
            <input id="text-input" data-bind="ojComponent: {component: 'ojInputSearch',
             value: value, rootAttributes: {'style': (smScreen ? 'max-width: 80%; margin-left: 10%;'
                                             : 'max-width: 60%; margin-left: 20%;')},
                                              optionChange: keywordChanged, options: refreshOptions}"/>
        </div>
    </div>
    <div class="search-title oj-padding-bottom" data-bind="visible: results">
       <span data-bind="text: 'Showing ' + currentCount() + ' out of ' + totalCount() + ' results' + ' (' + responseTime()/1000 + ' seconds)'"></span>
    </div>
    <div class="oj-flex" data-bind="visible: results">
        <ul id="listview" data-bind="ojComponent: {component: 'ojListView', data: results,
         item: {template: 'search-result-template'}, selectionMode: 'single',
         rootAttributes: {style: 'width:100%;height:70vh;overflow-x:hidden'},
          scrollPolicy: 'loadMoreOnScroll', scrollPolicyOptions: {fetchSize: 20}}">
        </ul>
    </div>
</div>

<script type="text/html" id="search-result-template">
    <div class="oj-flex">
        <div class="oj-flex-item fullSize">
            <a data-bind="text: ResultTitle, attr: {'href': PageURI, 'target': '_blank'}"></a>
        </div>
        <div class="oj-flex-item fullSize">
            <span data-bind="text: PageURI"></span>
        </div>
        <div>
            <span data-bind="html: $parent.highlightTerms(Description)"></span>
        </div>
    </div>
</script>